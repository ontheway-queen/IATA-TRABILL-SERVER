CREATE TABLE
    trabill_invoice_info (
        ti_id INT PRIMARY KEY AUTO_INCREMENT,
        ti_org_agency INT NOT NULL,
        ti_invoice_id INT NOT NULL,
        ti_sub_total DECIMAL(15, 2) DEFAULT NULL,
        ti_total_discount DECIMAL(15, 2) DEFAULT NULL,
        ti_net_total DECIMAL(15, 2) DEFAULT NULL,
        ti_total_payment DECIMAL(15, 2) DEFAULT NULL,
        ti_invoice_total_due DECIMAL(15, 2) DEFAULT NULL,
        ti_created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        ti_created_by INT DEFAULT NULL,
        ti_is_deleted tinyint DEFAULT 0,
        ti_deleted_by INT DEFAULT NULL,
        FOREIGN KEY (ti_org_agency) REFERENCES trabill_agency_organization_information (org_id),
        FOREIGN KEY (ti_invoice_id) REFERENCES trabill_invoices (invoice_id),
        FOREIGN KEY (ti_created_by) REFERENCES trabill_users (user_id) FOREIGN KEY (ti_deleted_by) REFERENCES trabill_users (user_id)
    );

CREATE TABLE
    trabill_invoice_info_items (
        tii_id INT PRIMARY KEY AUTO_INCREMENT,
        tii_ti_id INT NOT NULL,
        tii_org_agency INT NOT NULL,
        tii_invoice_id INT NOT NULL,
        tii_billing_id INT DEFAULT NULL,
        tii_airticket_id INT DEFAULT NULL,
        tii_airticket_no VARCHAR(50) DEFAULT NULL,
        tii_airticket_discount DECIMAL(15, 2) DEFAULT NULL,
        tii_airticket_class VARCHAR(50) DEFAULT NULL,
        tii_airticket_class_type VARCHAR(50) DEFAULT NULL,
        tii_airticket_pnr VARCHAR(50) DEFAULT NULL,
        tii_airticket_route VARCHAR(150) DEFAULT NULL,
        tii_total_discount DECIMAL(15, 2) DEFAULT 0,
        tii_product_name VARCHAR(100) DEFAULT NULL,
        tii_pax_name VARCHAR(100) DEFAULT NULL,
        tii_quantity INT DEFAULT 0,
        tii_unit_price DECIMAL(15, 2) DEFAULT 0,
        tii_sub_total DECIMAL(15, 2) DEFAULT 0,
        tii_visiting_country VARCHAR(50) DEFAULT NULL,
        tii_visa_type VARCHAR(30) DEFAULT NULL,
        tii_token_no VARCHAR(20) DEFAULT NULL,
        tii_status VARCHAR(25) DEFAULT NULL,
        tii_journey_date TIMESTAMP DEFAULT NULL,
        tii_total_room INT DEFAULT 0,
        tii_created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        tii_created_by INT DEFAULT NULL,
        tii_is_deleted tinyint DEFAULT 0,
        tii_deleted_by INT DEFAULT NULL,
        FOREIGN KEY (tii_org_agency) REFERENCES trabill_agency_organization_information (org_id),
        FOREIGN KEY (tii_invoice_id) REFERENCES trabill_invoices (invoice_id),
        FOREIGN KEY (tii_created_by) REFERENCES trabill_users (user_id),
        FOREIGN KEY (tii_deleted_by) REFERENCES trabill_users (user_id),
        FOREIGN KEY (tii_ti_id) REFERENCES trabill_invoice_info (ti_id)
    )